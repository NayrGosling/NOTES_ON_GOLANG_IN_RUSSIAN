# SOAP (Simple Object Access Protocol)

## Что это такое
SOAP (Simple Object Access Protocol) — это протокол обмена структурированными данными между системами, основанный на XML. Он используется для взаимодействия между клиентом и сервером, чаще всего через HTTP, но также поддерживает другие протоколы, такие как SMTP и TCP.

## Основные характеристики

### 1. Формат сообщений
SOAP-сообщения представляют собой XML-документы, содержащие:
- **Envelope (Конверт)** — корневой элемент, определяющий начало и конец сообщения.
- **Header (Заголовок)** — необязательная часть для метаданных (например, аутентификация).
- **Body (Тело)** — основная часть с данными запроса или ответа.
- **Fault (Ошибка)** — необязательный элемент для описания ошибок.

### 2. Протокольная независимость
SOAP работает поверх HTTP, HTTPS, SMTP и других протоколов, но сам по себе не привязан к ним.

### 3. WSDL (Web Services Description Language)
SOAP часто использует WSDL — XML-описание веб-сервиса, которое определяет доступные операции и способы их вызова.

### 4. Строгая типизация
SOAP требует точного определения типов данных (например, `int`, `string`), что делает его более строгим, чем REST.

### 5. Поддержка расширенных функций
SOAP поддерживает:
- **WS-Security** — расширенные механизмы безопасности (шифрование, цифровые подписи).
- **WS-ReliableMessaging** — гарантированную доставку сообщений.
- **WS-AtomicTransaction** — поддержку транзакций.

## Пример SOAP-запроса (упрощённый)
```xml
<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope">
  <soap:Header>
    <auth>token123</auth>
  </soap:Header>
  <soap:Body>
    <getCarPrice>
      <model>ВАЗ</model>
    </getCarPrice>
  </soap:Body>
</soap:Envelope>
```

## Преимущества SOAP
- **Поддержка сложных операций и транзакций**.
- **Встроенная обработка ошибок** через элемент `<Fault>`.
- **Высокий уровень безопасности** (например, через WS-Security).
- **Платформенная и языковая независимость** благодаря XML.
- **Гарантированная доставка сообщений** и надёжность передачи данных.

## Недостатки SOAP
- **Сложность** из-за XML и строгих правил.
- **Больший объём передаваемых данных** по сравнению с REST (JSON).
- **Низкая производительность** из-за необходимости парсинга XML.
- **Требование к строгому соответствию спецификациям**, что усложняет интеграцию.

## Применение SOAP
SOAP часто используется в корпоративных системах, где важны безопасность, стандартизация и надёжность, например:
- **Банковские и финансовые системы**.
- **Государственные сервисы и электронное правительство**.
- **Корпоративные интеграционные платформы (ESB, ERP, CRM)**.
- **Телекоммуникационные системы**.

## SOAP vs REST
| Фактор | SOAP | REST |
|--------|------|------|
| Формат данных | XML | JSON, XML, YAML, другие |
| Протоколы | HTTP, SMTP, TCP | HTTP |
| Безопасность | WS-Security | OAuth, HTTPS |
| Гибкость | Низкая (строгая типизация) | Высокая |
| Скорость | Медленнее (XML) | Быстрее (JSON) |
| Поддержка транзакций | Да | Ограниченная |

SOAP предлагает формальный и строгий подход к веб-сервисам, но REST более популярен в современных приложениях из-за простоты и высокой производительности.

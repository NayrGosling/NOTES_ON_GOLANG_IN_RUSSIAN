# –õ–µ–∫—Ü–∏—è: Docker

## –í–≤–µ–¥–µ–Ω–∏–µ
–ü—Ä–∏–≤–µ—Ç! –°–µ–≥–æ–¥–Ω—è –º—ã —Ä–∞–∑–±–µ—Ä—ë–º—Å—è —Å **Docker** ‚Äì —Å—É–ø–µ—Ä-–∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–º, –∫–æ—Ç–æ—Ä—ã–π –ø–æ–º–æ–≥–∞–µ—Ç –∑–∞–ø—É—Å–∫–∞—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –≤ –∏–∑–æ–ª–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞—Ö. –ü—Ä–µ–¥—Å—Ç–∞–≤—å, —á—Ç–æ —Ç–≤–æ–π –∫–æ–¥ ‚Äì —ç—Ç–æ –∏–≥—Ä—É—à–∫–∞, –∞ Docker ‚Äì —ç—Ç–æ –≤–æ–ª—à–µ–±–Ω–∞—è –∫–æ—Ä–æ–±–∫–∞, –≤ –∫–æ—Ç–æ—Ä–æ–π –∏–≥—Ä—É—à–∫–∞ –≤—Å–µ–≥–¥–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç –æ–¥–∏–Ω–∞–∫–æ–≤–æ, –≥–¥–µ –±—ã —Ç—ã –µ—ë –Ω–∏ –æ—Ç–∫—Ä—ã–ª! üì¶‚ú®

---

## –ß—Ç–æ —Ç–∞–∫–æ–µ Docker –∏ –∑–∞—á–µ–º –æ–Ω –Ω—É–∂–µ–Ω?
–û–±—ã—á–Ω–æ, –∫–æ–≥–¥–∞ —Ç—ã —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—à—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ, —Ç–µ–±–µ –Ω—É–∂–Ω–æ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å:
- –í–µ—Ä—Å–∏—é Go (1.18, 1.19, 1.20...)
- –ë–∏–±–ª–∏–æ—Ç–µ–∫–∏ (`gorm`, `echo`, `fiber`)
- –ë–∞–∑—É –¥–∞–Ω–Ω—ã—Ö (PostgreSQL, MySQL)
- –û–∫—Ä—É–∂–µ–Ω–∏–µ (Linux, Windows, MacOS)

> ‚ö†Ô∏è **–ü—Ä–æ–±–ª–µ–º–∞:** –£ —Ä–∞–∑–Ω—ã—Ö –ª—é–¥–µ–π —Ä–∞–∑–Ω—ã–µ —Å–∏—Å—Ç–µ–º—ã, –∏ –∫–æ–¥ –º–æ–∂–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å –Ω–µ –≤–µ–∑–¥–µ –æ–¥–∏–Ω–∞–∫–æ–≤–æ! üò±

### –†–µ—à–µ–Ω–∏–µ: **Docker** üê≥
Docker —Å–æ–∑–¥–∞—ë—Ç **–∫–æ–Ω—Ç–µ–π–Ω–µ—Ä** ‚Äì —ç—Ç–æ –∫–∞–∫ –∫–æ—Ä–æ–±–∫–∞, –≤ –∫–æ—Ç–æ—Ä–æ–π –µ—Å—Ç—å –≤—Å—ë, —á—Ç–æ –Ω—É–∂–Ω–æ –¥–ª—è —Ä–∞–±–æ—Ç—ã –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è:
‚úÖ –û–ø–µ—Ä–∞—Ü–∏–æ–Ω–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ üñ•Ô∏è
‚úÖ –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ üì¶
‚úÖ –ù–∞—Å—Ç—Ä–æ–π–∫–∏ ‚öôÔ∏è
‚úÖ –ö–æ–¥ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è üíª

–¢–µ–ø–µ—Ä—å —Ç–≤–æ–π –∫–æ–¥ –≤—Å–µ–≥–¥–∞ –±—É–¥–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å –æ–¥–∏–Ω–∞–∫–æ–≤–æ, –≥–¥–µ –±—ã —Ç—ã –µ–≥–æ –Ω–∏ –∑–∞–ø—É—Å—Ç–∏–ª! üöÄ

---

## –ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç Docker?
Docker –∏—Å–ø–æ–ª—å–∑—É–µ—Ç **–æ–±—Ä–∞–∑ (image)** ‚Äì —ç—Ç–æ –∫–∞–∫ —Ä–µ—Ü–µ–ø—Ç, –ø–æ –∫–æ—Ç–æ—Ä–æ–º—É –º–æ–∂–Ω–æ —Å–æ–∑–¥–∞—Ç—å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä.

1. üìú **–û–±—Ä–∞–∑** ‚Äì —ç—Ç–æ —Ñ–∞–π–ª —Å –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è–º–∏: ¬´–°–∫–∞—á–∞–π Go, —É—Å—Ç–∞–Ω–æ–≤–∏ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏, –∑–∞–ø—É—Å—Ç–∏ —Å–µ—Ä–≤–µ—Ä¬ª.
2. üì¶ **–ö–æ–Ω—Ç–µ–π–Ω–µ—Ä** ‚Äì —ç—Ç–æ –∑–∞–ø—É—â–µ–Ω–Ω—ã–π —ç–∫–∑–µ–º–ø–ª—è—Ä –æ–±—Ä–∞–∑–∞, –∫–æ—Ç–æ—Ä—ã–π –≤—ã–ø–æ–ª–Ω—è–µ—Ç —Ç–≤–æ–π –∫–æ–¥.

### –û—Ç–ª–∏—á–∏–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤ –æ—Ç –≤–∏—Ä—Ç—É–∞–ª—å–Ω—ã—Ö –º–∞—à–∏–Ω (VM)
| –§—É–Ω–∫—Ü–∏—è | –í–∏—Ä—Ç—É–∞–ª—å–Ω–∞—è –º–∞—à–∏–Ω–∞ | Docker-–∫–æ–Ω—Ç–µ–π–Ω–µ—Ä |
|---------|---------------------|------------------|
| –í—Ä–µ–º—è –∑–∞–ø—É—Å–∫–∞ | –ú–∏–Ω—É—Ç—ã ‚è≥ | –ú–∏–ª–ª–∏—Å–µ–∫—É–Ω–¥—ã ‚ö° |
| –†–∞–∑–º–µ—Ä | –ì–∏–≥–∞–±–∞–π—Ç—ã üèãÔ∏è | –ú–µ–≥–∞–±–∞–π—Ç—ã üéà |
| –ò–∑–æ–ª—è—Ü–∏—è | –ü–æ–ª–Ω–æ—Å—Ç—å—é –æ—Ç–¥–µ–ª—å–Ω–∞—è –û–° | –ò—Å–ø–æ–ª—å–∑—É–µ—Ç —è–¥—Ä–æ —Ö–æ—Å—Ç–∞ |
| –°–∫–æ—Ä–æ—Å—Ç—å —Ä–∞–±–æ—Ç—ã | –ú–µ–¥–ª–µ–Ω–Ω–∞—è üê¢ | –ë—ã—Å—Ç—Ä–∞—è üöÄ |

> üí° **–í—ã–≤–æ–¥:** –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã –ª–µ–≥—á–µ, –±—ã—Å—Ç—Ä–µ–µ –∏ —É–¥–æ–±–Ω–µ–µ, —á–µ–º –≤–∏—Ä—Ç—É–∞–ª—å–Ω—ã–µ –º–∞—à–∏–Ω—ã!

---

## –£—Å—Ç–∞–Ω–æ–≤–∫–∞ Docker
–°–Ω–∞—á–∞–ª–∞ —É—Å—Ç–∞–Ω–æ–≤–∏ Docker —Å [–æ—Ñ–∏—Ü–∏–∞–ª—å–Ω–æ–≥–æ —Å–∞–π—Ç–∞](https://www.docker.com/get-started).

–ü—Ä–æ–≤–µ—Ä—å, —á—Ç–æ –≤—Å—ë —Ä–∞–±–æ—Ç–∞–µ—Ç:
```sh
docker --version
```
–ï—Å–ª–∏ –≤—Å—ë –æ–∫, —Ç—ã —É–≤–∏–¥–∏—à—å –≤–µ—Ä—Å–∏—é Docker. –¢–µ–ø–µ—Ä—å –º–æ–∂–Ω–æ –Ω–∞—á–∏–Ω–∞—Ç—å! üéâ

---

## –ü–µ—Ä–≤—ã–π –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –Ω–∞ Go
–°–æ–∑–¥–∞–¥–∏–º –ø—Ä–æ—Å—Ç–æ–µ Go-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ, –∑–∞–≤–µ—Ä–Ω—ë–º –µ–≥–æ –≤ Docker –∏ –∑–∞–ø—É—Å—Ç–∏–º!

### 1. –ü–∏—à–µ–º —Å–µ—Ä–≤–µ—Ä –Ω–∞ Go
–°–æ–∑–¥–∞–π —Ñ–∞–π–ª `main.go`:
```go
package main

import (
	"fmt"
	"net/http"
)

func handler(w http.ResponseWriter, r *http.Request) {
	fmt.Fprintf(w, "–ü—Ä–∏–≤–µ—Ç, Docker!")
}

func main() {
	http.HandleFunc("/", handler)
	fmt.Println("–°–µ—Ä–≤–µ—Ä –∑–∞–ø—É—â–µ–Ω –Ω–∞ –ø–æ—Ä—Ç—É 8080")
	http.ListenAndServe(":8080", nil)
}
```

### 2. [–ü–∏—à–µ–º Dockerfile](https://github.com/NayrGosling/NOTES_ON_GOLANG_IN_RUSSIAN/blob/main/Docker/Dockerfile.md)
–°–æ–∑–¥–∞–π —Ñ–∞–π–ª `Dockerfile`:
```dockerfile
# –ò—Å–ø–æ–ª—å–∑—É–µ–º –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω—ã–π –æ–±—Ä–∞–∑ Go
FROM golang:1.20

# –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º —Ä–∞–±–æ—á—É—é –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é
WORKDIR /app

# –ö–æ–ø–∏—Ä—É–µ–º —Ñ–∞–π–ª—ã –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä
COPY . .

# –°–∫–∞—á–∏–≤–∞–µ–º –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
RUN go mod init example && go mod tidy

# –°–æ–±–∏—Ä–∞–µ–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
RUN go build -o server .

# –ó–∞–ø—É—Å–∫–∞–µ–º —Å–µ—Ä–≤–µ—Ä
CMD ["./server"]
```

### 3. –°–æ–±–∏—Ä–∞–µ–º –æ–±—Ä–∞–∑
–¢–µ–ø–µ—Ä—å —Å–æ–∑–¥–∞–¥–∏–º –æ–±—Ä–∞–∑ —Å –Ω–∞—à–∏–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ–º:
```sh
docker build -t my-go-app .
```

### 4. –ó–∞–ø—É—Å–∫–∞–µ–º –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä
```sh
docker run -p 8080:8080 my-go-app
```
–¢–µ–ø–µ—Ä—å –æ—Ç–∫—Ä–æ–π `http://localhost:8080`, –∏ —Ç—ã —É–≤–∏–¥–∏—à—å **¬´–ü—Ä–∏–≤–µ—Ç, Docker!¬ª** üéâ

---

## –†–∞–±–æ—Ç–∞ —Å Docker-–∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞–º–∏
üìú **–°–ø–∏—Å–æ–∫ –∑–∞–ø—É—â–µ–Ω–Ω—ã—Ö –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤:**
```sh
docker ps
```

üì¶ **–û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä:**
```sh
docker stop <container_id>
```

üóë **–£–¥–∞–ª–∏—Ç—å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä:**
```sh
docker rm <container_id>
```

üìú **–°–ø–∏—Å–æ–∫ –≤—Å–µ—Ö –æ–±—Ä–∞–∑–æ–≤:**
```sh
docker images
```

---

## [Docker Compose](https://github.com/NayrGosling/NOTES_ON_GOLANG_IN_RUSSIAN/blob/main/Docker/Docker%20Compose.md): –∑–∞–ø—É—Å–∫ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö —Å–µ—Ä–≤–∏—Å–æ–≤
–ï—Å–ª–∏ —É –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –µ—Å—Ç—å –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö, –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å **Docker Compose**.

–°–æ–∑–¥–∞–¥–∏–º `docker-compose.yml`:
```yaml
version: '3.8'

services:
  app:
    build: .
    ports:
      - "8080:8080"
    depends_on:
      - db

  db:
    image: postgres:15
    environment:
      POSTGRES_USER: user
      POSTGRES_PASSWORD: password
      POSTGRES_DB: mydb
    ports:
      - "5432:5432"
```
–ó–∞–ø—É—Å–∫–∞–µ–º –∫–æ–º–∞–Ω–¥–æ–π:
```sh
docker-compose up
```
–¢–µ–ø–µ—Ä—å —É –Ω–∞—Å –µ—Å—Ç—å Go-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ **–∏ –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –≤ –æ–¥–Ω–æ–º –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ**! üî•

---

## –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è Docker-–æ–±—Ä–∞–∑–æ–≤
–û–±—Ä–∞–∑—ã –º–æ–≥—É—Ç –±—ã—Ç—å –æ–≥—Ä–æ–º–Ω—ã–º–∏. –ö–∞–∫ –∏—Ö —É–º–µ–Ω—å—à–∏—Ç—å?

### 1. –ò—Å–ø–æ–ª—å–∑—É–µ–º `alpine`
```dockerfile
FROM golang:1.20-alpine
```
Alpine ‚Äì —ç—Ç–æ –ª—ë–≥–∫–∞—è Linux-—Å–∏—Å—Ç–µ–º–∞, —Ä–∞–∑–º–µ—Ä–æ–º –≤—Å–µ–≥–æ ~5MB!

### 2. –î–≤—É—Ö—ç—Ç–∞–ø–Ω–∞—è —Å–±–æ—Ä–∫–∞ (multi-stage build)
```dockerfile
# –≠—Ç–∞–ø 1: —Å–±–æ—Ä–∫–∞
FROM golang:1.20 AS builder
WORKDIR /app
COPY . .
RUN go build -o server .

# –≠—Ç–∞–ø 2: –º–∏–Ω–∏–º–∞–ª—å–Ω—ã–π –æ–±—Ä–∞–∑
FROM alpine:latest
WORKDIR /root/
COPY --from=builder /app/server .
CMD ["./server"]
```
–≠—Ç–æ —É–º–µ–Ω—å—à–∞–µ—Ç –æ–±—Ä–∞–∑ —Å **800MB –¥–æ 20MB**! üöÄ

---

## –ó–∞–∫–ª—é—á–µ–Ω–∏–µ
–¢–µ–ø–µ—Ä—å —Ç—ã –∑–Ω–∞–µ—à—å, —á—Ç–æ **Docker** –¥–µ–ª–∞–µ—Ç –∫–æ–¥ –ø–µ—Ä–µ–Ω–æ—Å–∏–º—ã–º, –±—ã—Å—Ç—Ä—ã–º –∏ —É–¥–æ–±–Ω—ã–º! üê≥

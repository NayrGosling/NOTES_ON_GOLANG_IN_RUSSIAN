# Domain-Driven Design (DDD) –≤ Golang

## –í–≤–µ–¥–µ–Ω–∏–µ

**Domain-Driven Design (DDD)** ‚Äî —ç—Ç–æ –ø–æ–¥—Ö–æ–¥ –∫ –ø—Ä–æ–µ–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—é –ø—Ä–æ–≥—Ä–∞–º–º–Ω–æ–≥–æ –æ–±–µ—Å–ø–µ—á–µ–Ω–∏—è, –ø—Ä–∏ –∫–æ—Ç–æ—Ä–æ–º –æ—Å–Ω–æ–≤–Ω–æ–µ –≤–Ω–∏–º–∞–Ω–∏–µ —É–¥–µ–ª—è–µ—Ç—Å—è **–±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–µ** –∏ –ø—Ä–µ–¥–º–µ—Ç–Ω–æ–π –æ–±–ª–∞—Å—Ç–∏. DDD –ø–æ–º–æ–≥–∞–µ—Ç —Ä–∞–∑—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å –≥–∏–±–∫–∏–µ –∏ –º–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º—ã–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è, —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä—É—è –∫–æ–¥ –Ω–∞ –æ—Å–Ω–æ–≤–µ —Ä–µ–∞–ª—å–Ω—ã—Ö –±–∏–∑–Ω–µ—Å-–ø—Ä–æ—Ü–µ—Å—Å–æ–≤.

–í —ç—Ç–æ–º –º–∞—Ç–µ—Ä–∏–∞–ª–µ –º—ã —Ä–∞—Å—Å–º–æ—Ç—Ä–∏–º:

- –û—Å–Ω–æ–≤–Ω—ã–µ –∫–æ–Ω—Ü–µ–ø—Ü–∏–∏ DDD
- –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–µ –ø—Ä–∏–Ω—Ü–∏–ø—ã
- –†–µ–∞–ª–∏–∑–∞—Ü–∏—é DDD –≤ Go

---

## –û—Å–Ω–æ–≤–Ω—ã–µ –∫–æ–Ω—Ü–µ–ø—Ü–∏–∏ DDD

### 1Ô∏è‚É£ **D****omain (–î–æ–º****–µ–Ω)**

–≠—Ç–æ –æ—Å–Ω–æ–≤–Ω–∞—è —á–∞—Å—Ç—å —Å–∏—Å—Ç–µ–º—ã, –≤–∫–ª—é—á–∞—é—â–∞—è –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫—É.

### 2Ô∏è‚É£ **Entity (–°—É—â–Ω–æ—Å—Ç—å)**

–û–±—ä–µ–∫—Ç, –∏–º–µ—é—â–∏–π **—É–Ω–∏–∫–∞–ª—å–Ω—ã–π –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä** –∏ –æ–ø—Ä–µ–¥–µ–ª—è—é—â–∏–π –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫—É.

```go
type User struct {
    ID   int
    Name string
    Age  int
}
```

### 3Ô∏è‚É£ **Value Object (–û–±—ä–µ–∫—Ç-–∑–Ω–∞—á–µ–Ω–∏–µ)**

–û–±—ä–µ–∫—Ç **–±–µ–∑ –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä–∞**, –ø–æ–ª–Ω–æ—Å—Ç—å—é –æ–ø—Ä–µ–¥–µ–ª—è–µ–º—ã–π —Å–≤–æ–∏–º–∏ —Å–≤–æ–π—Å—Ç–≤–∞–º–∏.

```go
type Address struct {
    City   string
    Street string
}
```

### 4Ô∏è‚É£ **Aggregate (–ê–≥—Ä–µ–≥–∞—Ç)**

–ì—Ä—É–ø–ø–∞ —Å—É—â–Ω–æ—Å—Ç–µ–π, —É–ø—Ä–∞–≤–ª—è–µ–º–∞—è –æ–¥–Ω–æ–π –≥–ª–∞–≤–Ω–æ–π —Å—É—â–Ω–æ—Å—Ç—å—é.

```go
type Order struct {
    ID      int
    Items   []Item
    Total   float64
}
```

### 5Ô∏è‚É£ **Repository (–†–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π)**

–û—Ç–≤–µ—á–∞–µ—Ç –∑–∞ –ø–æ–ª—É—á–µ–Ω–∏–µ –∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Å—É—â–Ω–æ—Å—Ç–µ–π.

```go
type UserRepository interface {
    Save(user User) error
    FindByID(id int) (User, error)
}
```

### 6Ô∏è‚É£ **Service (–°–µ—Ä–≤–∏—Å)**

–û–ø–∏—Å—ã–≤–∞–µ—Ç –æ–ø–µ—Ä–∞—Ü–∏–∏, –∫–æ—Ç–æ—Ä—ã–µ –Ω–µ–ª—å–∑—è –æ—Ç–Ω–µ—Å—Ç–∏ –∫ —Å—É—â–Ω–æ—Å—Ç–∏.

```go
type UserService struct {
    repo UserRepository
}

func (s *UserService) RegisterUser(name string, age int) error {
    user := User{Name: name, Age: age}
    return s.repo.Save(user)
}
```

---

## –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–µ –ø—Ä–∏–Ω—Ü–∏–ø—ã

### 1Ô∏è‚É£ **–†–∞–∑–¥–µ–ª–µ–Ω–∏–µ —Å–ª–æ–µ–≤**

DDD –ø—Ä–µ–¥–ø–æ–ª–∞–≥–∞–µ—Ç **—á–µ—Ç–∫–æ–µ —Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ —Å–ª–æ–µ–≤**:

- **–î–æ–º–µ–Ω (–ë–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞)** ‚Üí —Å—É—â–Ω–æ—Å—Ç–∏, –∞–≥—Ä–µ–≥–∞—Ç—ã, –æ–±—ä–µ–∫—Ç—ã-–∑–Ω–∞—á–µ–Ω–∏—è
- **–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ** ‚Üí —Å–µ—Ä–≤–∏—Å—ã, –∫–µ–π—Å—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è
- **–ò–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞** ‚Üí —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏, API, –ë–î

### 2Ô∏è‚É£ **Dependency Inversion (–ò–Ω–≤–µ—Ä—Å–∏—è –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π)**

–ë–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞ –Ω–µ –∑–∞–≤–∏—Å–∏—Ç –æ—Ç –≤–Ω–µ—à–Ω–∏—Ö –¥–µ—Ç–∞–ª–µ–π (–Ω–∞–ø—Ä–∏–º–µ—Ä, –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö).

```go
type OrderRepository interface {
    Save(order Order) error
}
```

–ò–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–Ω–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è:

```go
type OrderRepositoryDB struct {
    db *sql.DB
}

func (r *OrderRepositoryDB) Save(order Order) error {
    _, err := r.db.Exec("INSERT INTO orders VALUES (?, ?)", order.ID, order.Total)
    return err
}
```

---

## –†–µ–∞–ª–∏–∑–∞—Ü–∏—è DDD –≤ Go

### üìå **–°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞**

```
project/
‚îú‚îÄ‚îÄ domain/
‚îÇ   ‚îú‚îÄ‚îÄ user.go
‚îÇ   ‚îú‚îÄ‚îÄ order.go
‚îÇ   ‚îú‚îÄ‚îÄ repository.go
‚îÇ
‚îú‚îÄ‚îÄ application/
‚îÇ   ‚îú‚îÄ‚îÄ user_service.go
‚îÇ   ‚îú‚îÄ‚îÄ order_service.go
‚îÇ
‚îú‚îÄ‚îÄ infrastructure/
‚îÇ   ‚îú‚îÄ‚îÄ persistence/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ user_repo_db.go
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ order_repo_db.go
‚îÇ
‚îú‚îÄ‚îÄ main.go
```

### üìå **–ü—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è**

```go
func main() {
    db, _ := sql.Open("mysql", "user:password@/dbname")
    userRepo := &UserRepositoryDB{db: db}
    userService := UserService{repo: userRepo}
    
    err := userService.RegisterUser("Alice", 25)
    if err != nil {
        log.Fatal(err)
    }
}
```

---

## –ò—Ç–æ–≥

‚úÖ DDD –ø–æ–º–æ–≥–∞–µ—Ç —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞—Ç—å –∫–æ–¥ –∏ –≤—ã–¥–µ–ª—è—Ç—å –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫—É.
‚úÖ –í Go –º–æ–∂–Ω–æ —Ä–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å DDD —á–µ—Ä–µ–∑ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã –∏ –∏–Ω–≤–µ—Ä—Å–∏—é –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π.
‚úÖ –ß–µ—Ç–∫–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ DDD –¥–µ–ª–∞–µ—Ç –∫–æ–¥ **–º–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º—ã–º –∏ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–º**.

–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ DDD –≤ Go —É–ª—É—á—à–∞–µ—Ç —Å—Ç—Ä—É–∫—Ç—É—Ä—É –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –∏ —Å–Ω–∏–∂–∞–µ—Ç —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏–π –¥–æ–ª–≥. üöÄ


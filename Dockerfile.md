# –õ–µ–∫—Ü–∏—è: Dockerfile

## –í–≤–µ–¥–µ–Ω–∏–µ
–ü—Ä–∏–≤–µ—Ç! –°–µ–≥–æ–¥–Ω—è –º—ã —Ä–∞–∑–±–µ—Ä—ë–º—Å—è —Å **Dockerfile** ‚Äì —Å–ø–µ—Ü–∏–∞–ª—å–Ω—ã–º —Ñ–∞–π–ª–æ–º, –∫–æ—Ç–æ—Ä—ã–π –ø–æ–º–æ–≥–∞–µ—Ç —Å–æ–∑–¥–∞–≤–∞—Ç—å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã Docker. –ü—Ä–µ–¥—Å—Ç–∞–≤—å, —á—Ç–æ Docker ‚Äì —ç—Ç–æ –∫—É—Ö–Ω—è üç≥, –∞ Dockerfile ‚Äì —ç—Ç–æ —Ä–µ—Ü–µ–ø—Ç üìú, –ø–æ –∫–æ—Ç–æ—Ä–æ–º—É –º–æ–∂–Ω–æ –≥–æ—Ç–æ–≤–∏—Ç—å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã —Å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è–º–∏! üöÄ

---

## –ß—Ç–æ —Ç–∞–∫–æ–µ Dockerfile?
Dockerfile ‚Äì —ç—Ç–æ —Ç–µ–∫—Å—Ç–æ–≤—ã–π —Ñ–∞–π–ª —Å –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è–º–∏ –¥–ª—è —Å–±–æ—Ä–∫–∏ –æ–±—Ä–∞–∑–∞. –û–Ω –≥–æ–≤–æ—Ä–∏—Ç Docker:
- üì• –ö–∞–∫–∏–µ —Ñ–∞–π–ª—ã –Ω—É–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä.
- üèó –ö–∞–∫–∏–µ –∫–æ–º–∞–Ω–¥—ã –≤—ã–ø–æ–ª–Ω–∏—Ç—å –ø–µ—Ä–µ–¥ –∑–∞–ø—É—Å–∫–æ–º.
- üöÄ –ö–∞–∫ –∑–∞–ø—É—Å—Ç–∏—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ.

> üí° **Dockerfile ‚Äì —ç—Ç–æ —Ä–µ—Ü–µ–ø—Ç –¥–ª—è –ø—Ä–∏–≥–æ—Ç–æ–≤–ª–µ–Ω–∏—è –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤!**

---

## –û—Å–Ω–æ–≤–Ω—ã–µ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ Dockerfile
–í–æ—Ç —Å–ø–∏—Å–æ–∫ –≥–ª–∞–≤–Ω—ã—Ö –∫–æ–º–∞–Ω–¥, –∫–æ—Ç–æ—Ä—ã–µ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –≤ Dockerfile:

| –ö–æ–º–∞–Ω–¥–∞ | –û–ø–∏—Å–∞–Ω–∏–µ |
|---------|----------|
| `FROM` | –ë–∞–∑–æ–≤—ã–π –æ–±—Ä–∞–∑ (–Ω–∞–ø—Ä–∏–º–µ—Ä, `golang:1.20`) |
| `WORKDIR` | –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç —Ä–∞–±–æ—á—É—é –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ |
| `COPY` | –ö–æ–ø–∏—Ä—É–µ—Ç —Ñ–∞–π–ª—ã –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä |
| `RUN` | –í—ã–ø–æ–ª–Ω—è–µ—Ç –∫–æ–º–∞–Ω–¥—É –≤–æ –≤—Ä–µ–º—è —Å–±–æ—Ä–∫–∏ |
| `CMD` | –ö–æ–º–∞–Ω–¥–∞ –¥–ª—è –∑–∞–ø—É—Å–∫–∞ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ |
| `EXPOSE` | –û—Ç–∫—Ä—ã–≤–∞–µ—Ç –ø–æ—Ä—Ç—ã –¥–ª—è —Ä–∞–±–æ—Ç—ã –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è |
| `ENV` | –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è |

---

## –ü—Ä–æ—Å—Ç–æ–π Dockerfile –¥–ª—è Go
–°–æ–∑–¥–∞–¥–∏–º –º–∏–Ω–∏–º–∞–ª—å–Ω—ã–π Dockerfile –¥–ª—è Go-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è:

```dockerfile
# –ò—Å–ø–æ–ª—å–∑—É–µ–º –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω—ã–π –æ–±—Ä–∞–∑ Go
FROM golang:1.20

# –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º —Ä–∞–±–æ—á—É—é –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é
WORKDIR /app

# –ö–æ–ø–∏—Ä—É–µ–º —Ñ–∞–π–ª—ã
COPY . .

# –°–∫–∞—á–∏–≤–∞–µ–º –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
RUN go mod tidy

# –°–æ–±–∏—Ä–∞–µ–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
RUN go build -o server .

# –ó–∞–ø—É—Å–∫–∞–µ–º —Å–µ—Ä–≤–µ—Ä
CMD ["./server"]
```

### –ö–∞–∫ –∑–∞–ø—É—Å—Ç–∏—Ç—å —ç—Ç–æ—Ç Dockerfile?
```sh
docker build -t my-go-app .
docker run -p 8080:8080 my-go-app
```
–¢–µ–ø–µ—Ä—å —Å–µ—Ä–≤–µ—Ä —Ä–∞–±–æ—Ç–∞–µ—Ç –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ! üéâ

---

## –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è Dockerfile

### 1. –ò—Å–ø–æ–ª—å–∑—É–µ–º `alpine`
–°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π –æ–±—Ä–∞–∑ Go –≤–µ—Å–∏—Ç **800MB**! üò± –ú–æ–∂–Ω–æ —É–º–µ–Ω—å—à–∏—Ç—å —Ä–∞–∑–º–µ—Ä, –∏—Å–ø–æ–ª—å–∑—É—è `alpine`:
```dockerfile
FROM golang:1.20-alpine
```
–¢–µ–ø–µ—Ä—å –æ–±—Ä–∞–∑ –±—É–¥–µ—Ç –≤–µ—Å–∏—Ç—å **~20MB**! üöÄ

### 2. –î–≤—É—Ö—ç—Ç–∞–ø–Ω–∞—è —Å–±–æ—Ä–∫–∞ (Multi-Stage Build)
–î–µ–ª–∞–µ—Ç –æ–±—Ä–∞–∑ **–µ—â—ë –ª–µ–≥—á–µ**:
```dockerfile
# –≠—Ç–∞–ø 1: —Å–±–æ—Ä–∫–∞
FROM golang:1.20 AS builder
WORKDIR /app
COPY . .
RUN go build -o server .

# –≠—Ç–∞–ø 2: –º–∏–Ω–∏–º–∞–ª—å–Ω—ã–π –æ–±—Ä–∞–∑
FROM alpine:latest
WORKDIR /root/
COPY --from=builder /app/server .
CMD ["./server"]
```
–¢–µ–ø–µ—Ä—å –≤ –∏—Ç–æ–≥–æ–≤–æ–º –æ–±—Ä–∞–∑–µ **–Ω–µ—Ç –ª–∏—à–Ω–∏—Ö —Ñ–∞–π–ª–æ–≤**! üéØ

---

## –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è –∏ –∞—Ä–≥—É–º–µ–Ω—Ç—ã
–ò–Ω–æ–≥–¥–∞ –Ω—É–∂–Ω–æ –ø–µ—Ä–µ–¥–∞–≤–∞—Ç—å –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä:
```dockerfile
ENV PORT=8080
```
–ò–ª–∏ –∑–∞–¥–∞–≤–∞—Ç—å –∞—Ä–≥—É–º–µ–Ω—Ç—ã –≤–æ –≤—Ä–µ–º—è —Å–±–æ—Ä–∫–∏:
```dockerfile
ARG VERSION=1.0
RUN echo "Version: $VERSION"
```

–ó–∞–ø—É—Å–∫ —Å –∞—Ä–≥—É–º–µ–Ω—Ç–æ–º:
```sh
docker build --build-arg VERSION=2.0 -t my-go-app .
```

---

## –ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ —Å–ª–æ–∏ Docker
–ö–∞–∂–¥–∞—è –∫–æ–º–∞–Ω–¥–∞ –≤ Dockerfile —Å–æ–∑–¥–∞—ë—Ç –Ω–æ–≤—ã–π **—Å–ª–æ–π**:
```dockerfile
FROM golang:1.20
WORKDIR /app
COPY . .
RUN go mod tidy  # ‚ùå –î–æ–ª–≥–æ –ø—Ä–∏ –∫–∞–∂–¥–æ–º –±–∏–ª–¥–µ!
RUN go build -o server .
CMD ["./server"]
```
> ‚ö†Ô∏è **–ü—Ä–æ–±–ª–µ–º–∞**: –ü—Ä–∏ –∫–∞–∂–¥–æ–º –∏–∑–º–µ–Ω–µ–Ω–∏–∏ –∫–æ–¥–∞ `RUN go mod tidy` –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –∑–∞–Ω–æ–≤–æ! ‚è≥

### –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –∫–µ—à–∞
```dockerfile
FROM golang:1.20
WORKDIR /app
COPY go.mod go.sum ./
RUN go mod download  # ‚úÖ –í—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π!
COPY . .
RUN go build -o server .
CMD ["./server"]
```
–¢–µ–ø–µ—Ä—å –∫–µ—à –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è **–ø—Ä–∞–≤–∏–ª—å–Ω–æ**, –∏ —Å–±–æ—Ä–∫–∞ –±—ã—Å—Ç—Ä–µ–µ! üöÄ

---

## –ó–∞–∫–ª—é—á–µ–Ω–∏–µ
–¢–µ–ø–µ—Ä—å —Ç—ã –∑–Ω–∞–µ—à—å, –∫–∞–∫ –ø–∏—Å–∞—Ç—å **Dockerfile** –¥–ª—è Go-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π:
‚úÖ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `FROM` –¥–ª—è –≤—ã–±–æ—Ä–∞ –±–∞–∑–æ–≤–æ–≥–æ –æ–±—Ä–∞–∑–∞.
‚úÖ `COPY` –¥–ª—è –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—è —Ñ–∞–π–ª–æ–≤.
‚úÖ `RUN` –¥–ª—è —É—Å—Ç–∞–Ω–æ–≤–∫–∏ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π.
‚úÖ `CMD` –¥–ª—è –∑–∞–ø—É—Å–∫–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è.
‚úÖ –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å —Ä–∞–∑–º–µ—Ä –∏ –∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ.
